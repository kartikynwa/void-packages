# Template file for 'zellij'
pkgname=zellij
version=0.20.1
revision=1
# Dependency crate `wasmer-vm` only supports the following archs: x86_64, arm64, x86
# https://docs.wasmer.io/ecosystem/wasmer/wasmer-features#compiler-support-by-chipset
archs="x86_64* aarch64* i686"
build_style=cargo
build_helper=qemu
hostmakedepends="pkg-config"
makedepends="openssl-devel"
short_desc="Terminal workspace with batteries included"
maintainer="Kartik Singh <kartik.ynwa@gmail.com>"
license="MIT"
homepage="https://github.com/zellij-org/zellij"
distfiles="https://github.com/zellij-org/zellij/archive/refs/tags/v${version}.tar.gz"
checksum=aa2cc622f924c1d41a8b1b616aae3d7b989e483bca1041061db43b6d0c6c9f52

post_build() {
	ZELLIJ="target/${RUST_TARGET}/release/zellij"
	vtargetrun ${ZELLIJ} setup --generate-completion zsh  > zellij.zsh
	vtargetrun ${ZELLIJ} setup --generate-completion bash > zellij.bash
	vtargetrun ${ZELLIJ} setup --generate-completion fish > zellij.fish
}

post_install() {
	vcompletion zellij.bash bash
	vcompletion zellij.fish fish
	vcompletion zellij.zsh zsh

	vlicense LICENSE.md
	vdoc docs/MANPAGE.md
}
